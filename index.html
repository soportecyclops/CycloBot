// script.js - VersiÃ³n Ultra Compacta
class CycloBot {
    constructor() {
        this.currentTheme = 'cyber-blue';
        this.init();
    }

    init() {
        this.loadTheme();
        this.initEventListeners();
    }

    loadTheme() {
        const savedTheme = localStorage.getItem('cyclobot-theme') || 'cyber-blue';
        this.setTheme(savedTheme);
        const themeSelector = document.getElementById('theme-selector');
        if (themeSelector) themeSelector.value = savedTheme;
    }

    setTheme(themeName) {
        this.currentTheme = themeName;
        document.documentElement.setAttribute('data-theme', themeName);
        localStorage.setItem('cyclobot-theme', themeName);
    }

    initEventListeners() {
        // Selector de temas
        const themeSelector = document.getElementById('theme-selector');
        if (themeSelector) {
            themeSelector.addEventListener('change', (e) => this.setTheme(e.target.value));
        }

        // CategorÃ­as
        document.querySelectorAll('.category-card').forEach(card => {
            card.addEventListener('click', () => {
                const category = card.getAttribute('data-category');
                this.handleCategorySelection(category);
            });
        });

        // Botones rÃ¡pidos
        document.querySelectorAll('.quick-btn').forEach(btn => {
            btn.addEventListener('click', () => {
                const problem = btn.getAttribute('data-problem');
                this.handleQuickProblem(problem);
            });
        });

        // Modal
        document.querySelectorAll('.close-modal').forEach(btn => {
            btn.addEventListener('click', () => this.hideLoginModal());
        });

        window.addEventListener('click', (e) => {
            if (e.target === document.getElementById('loginModal')) {
                this.hideLoginModal();
            }
        });
    }

    handleCategorySelection(category) {
        const categoryNames = {
            'hardware': 'Hardware', 'software': 'Software', 'network': 'Redes',
            'security': 'Seguridad', 'performance': 'Rendimiento', 'other': 'Otros'
        };
        this.showTempMessage(`ðŸ”§ DiagnÃ³stico: ${categoryNames[category]}`, 'info');
        setTimeout(() => this.showTempMessage('â³ Conectando con base de datos...', 'warning'), 1500);
    }

    handleQuickProblem(problem) {
        const problemNames = {
            'pc-no-enciende': 'PC no enciende', 'internet-lento': 'Internet lento', 
            'pantalla-azul': 'Pantalla azul', 'virus': 'Problemas con virus'
        };
        this.showTempMessage(`ðŸ” Analizando: ${problemNames[problem]}`, 'info');
        setTimeout(() => this.showTempMessage('ðŸ”„ Procesando soluciÃ³n...', 'warning'), 2000);
    }

    showTempMessage(text, type = 'info') {
        const messageDiv = document.createElement('div');
        messageDiv.innerHTML = `<i class="fas fa-${this.getMessageIcon(type)}"></i> ${text}`;
        Object.assign(messageDiv.style, {
            position: 'fixed', top: '20px', left: '50%', transform: 'translateX(-50%)',
            padding: '10px 16px', borderRadius: '6px', color: 'white', fontWeight: '600',
            zIndex: '10000', maxWidth: '350px', textAlign: 'center', fontSize: '0.85rem',
            boxShadow: '0 4px 12px rgba(0,0,0,0.3)', backgroundColor: this.getMessageColor(type)
        });
        document.body.appendChild(messageDiv);
        setTimeout(() => messageDiv.remove(), 2500);
    }

    getMessageIcon(type) {
        return { 'info': 'info-circle', 'warning': 'exclamation-triangle', 
                'success': 'check-circle', 'error': 'times-circle' }[type] || 'info-circle';
    }

    getMessageColor(type) {
        return { 'info': '#3b82f6', 'warning': '#f59e0b', 
                'success': '#10b981', 'error': '#ef4444' }[type] || '#3b82f6';
    }

    hideLoginModal() {
        const modal = document.getElementById('loginModal');
        if (modal) modal.style.display = 'none';
    }

    showLoginModal() {
        const modal = document.getElementById('loginModal');
        if (modal) modal.style.display = 'block';
    }
}

// InicializaciÃ³n mÃ­nima
document.addEventListener('DOMContentLoaded', () => {
    window.cycloBotUI = new CycloBot();
});
